<div class="search-container">
  <app-export-data [nameTags]="nameTags" [releasesForm]="releasesForm"></app-export-data>
  <div class="fields-container">
    <mat-form-field appearance="outline" class="example-mat-select">
      <mat-label>Release</mat-label>
      <mat-select [formControl]="releasesForm" multiple required>
        <mat-option (click)="chooseAll()" [value]="all">All</mat-option>
        <mat-option
          *ngFor="let release of releaseList$ | async"
          (click)="chooseOne()"
          [value]="release">
          {{release}}
        </mat-option>
        <mat-select-trigger>
          {{(releasesForm.value ? ((releasesForm.value && releasesForm.value.indexOf(all) >= 0) ? 'All' : releasesForm.value[0]) : '')}}
          <span *ngIf="releasesForm.value?.length > 1" class="example-additional-selection">
          (+{{releasesForm.value.length - 1}} {{releasesForm.value?.length === 2 ? 'other' : 'others'}})
        </span>
        </mat-select-trigger>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" class="example-form-field">
      <mat-label>Tag</mat-label>
      <input tabindex="0"
             placeholder="Select tag"
             aria-label="Tag"
             matInput
             [formControl]="myControl"
             [matAutocomplete]="auto"
             (focus)="onFocus()">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option
          *ngFor="let tag of tags$ | async "
          [value]="tag.name"
          (onSelectionChange)="callSomeFunction($event, tag);">
          <mat-icon class="mat-icon notranslate material-icons"
                    role="img" [ngStyle]="{'color':tag.type.color}">label</mat-icon>
          <span>{{tag.name}}</span>
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </div>
  <div class="example-container">
    <mat-chip-list aria-label="Search by tag">
      <mat-chip
        class="color-border-chip"
        *ngFor="let tag of nameTags"
        [selectable]="selectable"
        [removable]="removable"
        (removed)="remove(tag)"
        [ngStyle]="{'background':tag.type.color}">
        {{tag.name}}
        <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
      </mat-chip>
    </mat-chip-list>
  </div>
  <app-found-data-table [dataSource]="dataSource"></app-found-data-table>
</div>
